CREATE TABLE damage (id BIGINT UNIQUE, report_id BIGINT NOT NULL, damage VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX report_id_idx (report_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE earthquake (id BIGINT UNIQUE, magnitude FLOAT(18, 2), link TEXT, description VARCHAR(255), latitude FLOAT(18, 2), longitude FLOAT(18, 2), time_of_quake datetime, depth FLOAT(18, 2), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE report (id BIGINT UNIQUE, earthquake_id BIGINT NOT NULL, felt TINYINT(1) DEFAULT '1' NOT NULL, other_felt VARCHAR(255) DEFAULT 'NONE' NOT NULL, asleep VARCHAR(255) DEFAULT 'NO' NOT NULL, situation VARCHAR(255) DEFAULT 'INSIDE' NOT NULL, situation_other VARCHAR(255), motion VARCHAR(255) DEFAULT 'NOT_FELT' NOT NULL, duration VARCHAR(255) DEFAULT '1_SEC' NOT NULL, reaction VARCHAR(255) DEFAULT 'NONE' NOT NULL, response VARCHAR(255) DEFAULT 'NONE' NOT NULL, stand TINYINT(1) DEFAULT '0' NOT NULL, sway VARCHAR(255) DEFAULT 'NO' NOT NULL, creak VARCHAR(255) DEFAULT 'NO' NOT NULL, shelf VARCHAR(255) DEFAULT 'NO' NOT NULL, picture VARCHAR(255) DEFAULT 'NO' NOT NULL, furniture TINYINT(1) DEFAULT '0' NOT NULL, heavy_appliance VARCHAR(255) DEFAULT 'NO' NOT NULL, walls VARCHAR(255) DEFAULT 'NO' NOT NULL, reporter_name VARCHAR(255), contact_phone VARCHAR(30), contact_email VARCHAR(255), latitude VARCHAR(255) NOT NULL, longitude VARCHAR(255) NOT NULL, building VARCHAR(100) NOT NULL, story text, mmi FLOAT(18, 2), distance_from_epicentre FLOAT(18, 2), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX earthquake_id_idx (earthquake_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE damage ADD CONSTRAINT damage_report_id_report_id FOREIGN KEY (report_id) REFERENCES report(id);
ALTER TABLE report ADD CONSTRAINT report_earthquake_id_earthquake_id FOREIGN KEY (earthquake_id) REFERENCES earthquake(id);
