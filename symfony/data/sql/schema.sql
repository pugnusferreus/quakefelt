CREATE TABLE damage (id BIGINT UNIQUE, report_id BIGINT NOT NULL, damage VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX report_id_idx (report_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE earthquake (id BIGINT UNIQUE, magnitude FLOAT(18, 2), link TEXT, description VARCHAR(255), latitude FLOAT(18, 2), longitude FLOAT(18, 2), time_of_quake datetime, depth FLOAT(18, 2), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE report (id BIGINT UNIQUE, earthquake_id BIGINT NOT NULL, reporter_name VARCHAR(255), contact_phone VARCHAR(30), contact_email VARCHAR(255), situation VARCHAR(255) NOT NULL, latitude VARCHAR(255) NOT NULL, longitude VARCHAR(255) NOT NULL, building VARCHAR(100) NOT NULL, asleep VARCHAR(255) NOT NULL, felt BIGINT NOT NULL, other_felt VARCHAR(255) NOT NULL, motion VARCHAR(255) NOT NULL, duration BIGINT, reaction VARCHAR(255) NOT NULL, response VARCHAR(255) NOT NULL, stand VARCHAR(255) NOT NULL, sway VARCHAR(255) NOT NULL, creak VARCHAR(255) NOT NULL, shelf VARCHAR(255) NOT NULL, picture VARCHAR(255) NOT NULL, furniture VARCHAR(255) NOT NULL, heavy_appliance VARCHAR(255) NOT NULL, walls VARCHAR(255) NOT NULL, d_text TEXT, mmi FLOAT(18, 2), distance_from_epicentre FLOAT(18, 2), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX earthquake_id_idx (earthquake_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE damage ADD CONSTRAINT damage_report_id_report_id FOREIGN KEY (report_id) REFERENCES report(id);
ALTER TABLE report ADD CONSTRAINT report_earthquake_id_earthquake_id FOREIGN KEY (earthquake_id) REFERENCES earthquake(id);
